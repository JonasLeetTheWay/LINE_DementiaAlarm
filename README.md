
# Dementia Alarm Chatbot

A new way to connect to dementia people. Want to remind patient something? Start with LINE. 

Your voice message in LINE can be directly broadcasted to the speaker, which can be heard by patient easily. It comes with alarm feature, so your voice message will be automatically broadcasted to patient, at the right time. Note that, the alarm is customizable voice message... Now that is revolutionary! 

Please send feedback to us, so we can keep better our customer experience, deliver better service!

<p align="center">
<a href="https://liff.line.me/1645278921-kWRPP32q/?accountId=843ffueb">
<img alt="Dementia Alarm Chatbot" src="https://user-images.githubusercontent.com/75115433/201181405-bc23f1ce-d9d7-465f-8c1f-b47d76a80186.png" width="100"/>
</a><br>
https://liff.line.me/1645278921-kWRPP32q/?accountId=843ffueb
</p>

> only software part of development is completed, the hardware part is still a work in progress - device to receive LINE voice message

> it is designed to work on smartphones only, certain features will not work on LINE desktop app

<br><br>

### User Interface

- menu

    <img src="https://user-images.githubusercontent.com/75115433/201467962-dfc08c4c-a24d-40b6-a382-7ad4fe81854d.jpeg" width=300>

- floating button

    <img src="https://user-images.githubusercontent.com/75115433/201467648-c9bb3b5f-f7ac-4e15-bb3c-3cf31b13ee1f.png" width=300>
    <br>
    <img src="https://user-images.githubusercontent.com/75115433/201467649-bb4c953d-1a29-4449-8291-b543ceaf700c.jpg" width=300>
    <br>
    <img src="https://user-images.githubusercontent.com/75115433/201467968-bfb08d3f-5137-47de-9fc2-5106a88802aa.jpeg" width=300>
    <br>
    <img src="https://user-images.githubusercontent.com/75115433/201468430-797d7639-6a1e-4219-b3a9-ddb7b2338488.jpg" width=300>

- alarm info after recording

    <img src="https://user-images.githubusercontent.com/75115433/201467644-9e5cb6c8-48b2-4db7-9868-0b66b9c9d22a.jpg" width=300>
    <br>
    <img src="https://user-images.githubusercontent.com/75115433/201467646-8143a2f2-eef9-464b-b337-571f789941e5.png" width=300>
    <br>
    <img src="https://user-images.githubusercontent.com/75115433/201467647-61279def-73e1-46dd-890e-dfc8be705437.png" width=300>

## Terminology
|<img src="https://user-images.githubusercontent.com/75115433/201294998-3a7157ff-0238-4150-8ba5-2a08d8bf5870.png" width="70"/> |<img src="https://user-images.githubusercontent.com/75115433/201294976-fd948a9f-0465-43f2-904e-fb37d13e3b66.png" width="70"/>|<img src="https://user-images.githubusercontent.com/75115433/201469188-fd4d276b-493c-4fcc-996d-b489257caa50.png" width="70"/>|
|:--------:|:--------:|:--------:|
|Alarm Watcher|Alarm Deleter|Task Manager|

<br><br>

# Tutorials

## Selecting language:
|          |**Procedures**|
|:--------:|:-----------------    |
|| 1. type in "lang" |
|| 2. navigate floating button |
|*how to...*| <details><summary>select language</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201319528-bf8d4167-d18c-4ce3-bb89-2aa80fc91515.gif" width="250"/> </p></details>|


## Setting up voice alarm:
|          |**Procedures**|
|:--------:|:-----------------    |
|| 1. record voice message to start |
|| 2. pick a datetime for your voice alarm |
|| 3. received details about the alarm you just set|
|*how to...*| <details><summary>record</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201287327-78389f5c-90a0-4f83-a563-c55163c43a50.gif" width="250"/> </p></details>|


## View info about recorded alarms:
#### just after recording

||**Procedures**|
|:-:|:--------------------            |
||navigate floating button |
|*how to...*|<details><summary>view</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201311281-80f27a2f-33a2-4e89-8bc7-a08b2dfb493e.gif" width="250"/> </p></details> |


#### with AlarmWatcher
||**Procedures**
|:-:|:--------------------            |
||navigate floating button |
|*how to...*|<details><summary>view all</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201305840-256eb03b-add3-4fb7-a418-40a1c9a847ca.gif" width="250"/> </p></details> |
|*how to...*|<details><summary>view single</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201311272-acf88cc9-9f11-485b-9c92-662af1d16f89.gif" width="250"/> </p></details>|


## Reconfiguring recorded alarms:

||**Procedures**|
|:-:|:--------------------            |
||1. navigate floating button |
||2. <li> press "Edit" to reassign timer for the voice alarm </li> <li>press "View" to listen to recorded voice alarm </li>|
|*how to...*|<details><summary>reconfigure</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201287338-0f075bff-287f-4eb9-99d2-1f1d23af15d7.gif" width="250"/> </p></details> |


## There's two ways to delete an alarm
#### just after recording
||**Procedures**|
|:--:|:----------------- |
||press "Cancel" just after recording voice alarm <li>delete only that particular voice message you just recorded</li> |
|*how to...*| <details><summary>cancel</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201305918-d807419b-5be8-4100-b79a-c22cc3187603.gif" width="250"/>   </p></details> |


#### with AlarmDeleter
||**Procedures**|
|:---|:----------------- |
||press "Delete Alarms" icon on Richmenu <li> delete any alarms of your choice </li><li> delete all alarms  </li> |
|*how to...*| <details><summary>delete</summary><p><img src="https://user-images.githubusercontent.com/75115433/201305821-6eb11701-9aaf-4782-aeb0-db792c1cdb87.gif" width="250"/>  </p></details> |
|*how to...*| <details><summary>exit</summary><p> <img src="https://user-images.githubusercontent.com/75115433/201305833-c55cd141-b06a-4c73-a270-86387ac17679.gif" width="250"/>  </p></details> |

<br><br><br>

## Project Structure:

### Serverless Backend

I've selected `Firebase` as the backend for 3 reasons:

1. almost zero-downtime backend server (99.99% uptime)
2. easier to set up and therefore `great for prototyping`
3. friendly NoSQL, document-oriented database
4. manageable cloud functions
5. using AWS is a bit overkill, since my project userbase is currently very small

<details>

#### Firestore Database
Firebase offers a `NoSQL, document-oriented database` in Cloud Firestore. Unlike a SQL database, there are no tables or rows. Instead, you store data in documents, which are organized into collections. Allowed datatypes: string, number, boolean, map, array, null, timestamp, geopoint, reference. 

Their database structure enables me to store data without having to worry about datatypes constrain and resort to converting, which allows easier data-writing and data-retrieval. A huge plus.

#### Firebase Cloud Functions
The biggest reason to use Firebase comes down to `Google cloud functions`. It is easier for developers to get started and automatically scale their applications. Unlike in the case of AWS Lambda, the number of steps required to deploy the functions is less, and the platform also installs the dependencies automatically taking the load out of developers.
Comes packaged with an HTTP endpoint which can be used as a trigger Integration with Google Cloud big data services allows use cases like real-time stream processing and other big data use cases without much operational overhead.

[Firebase empowers an app with userbase over 200k](https://ably.com/topic/scaling-firebase-realtime-database)

</details>

### Integrating LINE and Firebase API
I used LINE api to generate message in a meaningful layout, making each interaction steps intuitive

* Designed Line Chatbot user-interface and with the following message formats:
    * [Quick Replies](https://developers.line.biz/en/docs/messaging-api/using-quick-reply/#using-quick-reply-introduction)
    * [Flex Message](https://developers.line.biz/en/docs/messaging-api/using-flex-message-simulator/) (customizable message with pseudo CSS layout)

<details>

### Debugging

For debugging, I prefer to emulate cloud functions locally, since the error logging is much more in a complete-piece, rather than broken into separate lines in Cloud Logger.

Unfortunately, I did not write any test that catch bugs earlier. Rather than finding out the problem while trying out the LINE chatbot myself, I could have automate the test to Google Cloud Platform, and allow them to throw me error, so the bugs can be found earlier, avoid accumulating to a huge problem where multiple bugs exist.

<img src="https://user-images.githubusercontent.com/75115433/201413133-7f9e30ee-810b-43ca-950d-f51858fcfceb.png" width=500>

<img src="https://user-images.githubusercontent.com/75115433/201413373-b1c13c22-5ab0-453e-b249-e1d30c06f24b.png" width=500>
</details>

